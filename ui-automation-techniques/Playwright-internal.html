<!DOCTYPE html>
<html lang="zh-CN" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playwright自动化网页操作与鼠标点击控制原理解析</title>
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://g.alicdn.com/code/lib/tailwindcss/2.2.19/tailwind.min.css">
    <link rel="stylesheet" href="https://fonts.font.im/css?family=Noto+Serif+SC:wght@400;500;600;700&family=Noto+Sans+SC:wght@300;400;500;700&display=swap">
    <script src="https://g.alicdn.com/code/lib/mermaid/11.5.0/mermaid.min.js"></script>
    <script src="https://g.alicdn.com/code/lib/Chart.js/4.4.1/chart.umd.min.js"></script>
    <style>
        :root {
            --primary-color: #5964e0;
            --primary-light: #939bf4;
            --dark-bg: #121721;
            --dark-card: #19202d;
            --light-bg: #f4f6f8;
            --light-card: #ffffff;
            --dark-text: #19202d;
            --light-text: #ffffff;
            --gray-text: #6e8098;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }

        body.light {
            background-color: var(--light-bg);
            color: var(--dark-text);
        }

        body.dark {
            background-color: var(--dark-bg);
            color: var(--light-text);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Noto Serif SC', serif;
        }

        .card {
            border-radius: 8px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
        }

        .light .card {
            background-color: var(--light-card);
        }

        .dark .card {
            background-color: var(--dark-card);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-light);
        }

        /* 自定义首字下沉效果 */
        .first-letter {
            float: left;
            font-size: 4rem;
            line-height: 1;
            margin-right: 0.5rem;
            margin-top: 0.25rem;
            color: var(--primary-color);
            font-weight: bold;
            font-family: 'Noto Serif SC', serif;
        }

        .light .code-block {
            background-color: #f8f9fa;
        }

        .dark .code-block {
            background-color: #2d3748;
        }

        /* 自定义滑块切换开关 */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 30px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 22px;
            width: 22px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: 0.4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: var(--primary-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(30px);
        }

        .table-of-contents {
            position: sticky;
            top: 20px;
            max-height: calc(100vh - 40px);
            overflow-y: auto;
        }

        .highlight {
            background: linear-gradient(transparent 60%, rgba(89, 100, 224, 0.2) 40%);
            display: inline;
        }

        @media (max-width: 768px) {
            .table-of-contents {
                position: relative;
                max-height: none;
            }
        }

        /* 自定义引用样式 */
        blockquote {
            border-left: 4px solid var(--primary-color);
            padding-left: 1rem;
            font-style: italic;
            margin: 1.5rem 0;
            color: var(--gray-text);
        }

        /* 平滑滚动 */
        html {
            scroll-behavior: smooth;
        }

        /* 自定义选项卡 */
        .tabs {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
        }

        .tab {
            padding: 0.75rem 1rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            border-bottom: 2px solid var(--primary-color);
            color: var(--primary-color);
            font-weight: 500;
        }

        .tab-content {
            display: none;
            padding: 1rem 0;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* 自定义图表容器 */
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        
        .tooltip {
            position: relative;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--dark-bg);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }
        
        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 100;
            background-color: inherit;
        }
        
        .progress-container {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .progress-bar {
            height: 4px;
            background: var(--primary-color);
            width: 0%;
        }
    </style>
</head>
<body class="light">
    <!-- 顶部导航栏 -->
    <header class="sticky-nav shadow-md">
        <div class="progress-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-robot text-2xl text-primary-500 mr-2"></i>
                <h1 class="text-xl font-bold">Playwright自动化</h1>
            </div>
            <div class="flex items-center space-x-6">
                <div class="hidden md:flex space-x-4">
                    <a href="#architecture" class="hover:text-primary-500 transition-colors">底层架构</a>
                    <a href="#dom-operations" class="hover:text-primary-500 transition-colors">DOM操作</a>
                    <a href="#click-mechanism" class="hover:text-primary-500 transition-colors">点击机制</a>
                    <a href="#advanced-features" class="hover:text-primary-500 transition-colors">高级功能</a>
                </div>
                <div class="flex items-center space-x-2">
                    <i class="fas fa-sun"></i>
                    <label class="toggle-switch">
                        <input type="checkbox" id="themeToggle">
                        <span class="toggle-slider"></span>
                    </label>
                    <i class="fas fa-moon"></i>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero区域 -->
    <section class="py-16 md:py-24 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white">
        <div class="container mx-auto px-4">
            <div class="max-w-4xl mx-auto text-center">
                <h1 class="text-4xl md:text-6xl font-bold mb-6">Playwright自动化网页操作与鼠标点击控制原理解析</h1>
                <p class="text-xl md:text-2xl mb-8 opacity-90">深入探索Playwright如何实现跨浏览器的自动化操作、DOM元素定位与鼠标事件模拟</p>
                <div class="flex flex-wrap justify-center gap-4">
                    <a href="#architecture" class="bg-white text-indigo-600 font-medium px-6 py-3 rounded-lg shadow-md hover:shadow-lg transition-all">了解底层架构</a>
                    <a href="#click-mechanism" class="bg-transparent border-2 border-white text-white font-medium px-6 py-3 rounded-lg shadow-md hover:bg-white hover:text-indigo-600 transition-all">探索点击机制</a>
                </div>
            </div>
        </div>
    </section>

    <!-- 主要内容区 -->
    <main class="container mx-auto px-4 py-12">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- 左侧目录 -->
            <aside class="lg:w-1/4">
                <div class="table-of-contents card p-6 mb-6">
                    <h3 class="text-lg font-bold mb-4 flex items-center">
                        <i class="fas fa-list-ul mr-2"></i>目录
                    </h3>
                    <ul class="space-y-2">
                        <li>
                            <a href="#architecture" class="hover:text-primary-500 transition-colors flex items-center">
                                <i class="fas fa-server mr-2 text-sm"></i>
                                底层架构与工作原理
                            </a>
                            <ul class="pl-6 mt-2 space-y-1">
                                <li><a href="#arch-overview" class="text-sm hover:text-primary-500 transition-colors">架构概述</a></li>
                                <li><a href="#browser-communication" class="text-sm hover:text-primary-500 transition-colors">浏览器通信机制</a></li>
                                <li><a href="#cross-browser" class="text-sm hover:text-primary-500 transition-colors">跨浏览器兼容性</a></li>
                            </ul>
                        </li>
                        <li class="pt-2">
                            <a href="#dom-operations" class="hover:text-primary-500 transition-colors flex items-center">
                                <i class="fas fa-code mr-2 text-sm"></i>
                                DOM操作与选择器系统
                            </a>
                            <ul class="pl-6 mt-2 space-y-1">
                                <li><a href="#selector-types" class="text-sm hover:text-primary-500 transition-colors">选择器类型</a></li>
                                <li><a href="#auto-waiting" class="text-sm hover:text-primary-500 transition-colors">自动等待机制</a></li>
                                <li><a href="#shadow-dom" class="text-sm hover:text-primary-500 transition-colors">Shadow DOM支持</a></li>
                            </ul>
                        </li>
                        <li class="pt-2">
                            <a href="#click-mechanism" class="hover:text-primary-500 transition-colors flex items-center">
                                <i class="fas fa-mouse-pointer mr-2 text-sm"></i>
                                鼠标点击模拟机制
                            </a>
                            <ul class="pl-6 mt-2 space-y-1">
                                <li><a href="#click-implementation" class="text-sm hover:text-primary-500 transition-colors">点击实现流程</a></li>
                                <li><a href="#click-options" class="text-sm hover:text-primary-500 transition-colors">点击选项解析</a></li>
                                <li><a href="#coordinates" class="text-sm hover:text-primary-500 transition-colors">坐标计算与事件分发</a></li>
                            </ul>
                        </li>
                        <li class="pt-2">
                            <a href="#advanced-features" class="hover:text-primary-500 transition-colors flex items-center">
                                <i class="fas fa-star mr-2 text-sm"></i>
                                高级交互功能与最佳实践
                            </a>
                            <ul class="pl-6 mt-2 space-y-1">
                                <li><a href="#drag-drop" class="text-sm hover:text-primary-500 transition-colors">拖拽操作实现</a></li>
                                <li><a href="#hover" class="text-sm hover:text-primary-500 transition-colors">悬停与复杂交互</a></li>
                                <li><a href="#best-practices" class="text-sm hover:text-primary-500 transition-colors">性能与稳定性优化</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <div class="card p-6">
                    <h3 class="text-lg font-bold mb-4 flex items-center">
                        <i class="fas fa-lightbulb mr-2"></i>延伸阅读
                    </h3>
                    <ul class="space-y-3">
                        <li>
                            <a href="#" class="hover:text-primary-500">
                                <div class="font-medium">《Web自动化测试实战》</div>
                                <div class="text-sm text-gray-500">详细介绍Playwright与其他自动化工具的深度对比</div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="hover:text-primary-500">
                                <div class="font-medium">《浏览器自动化协议详解》</div>
                                <div class="text-sm text-gray-500">深入CDP和浏览器通信协议的技术细节</div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="hover:text-primary-500">
                                <div class="font-medium">《DOM事件模拟编程指南》</div>
                                <div class="text-sm text-gray-500">掌握浏览器事件模拟的核心技术</div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="hover:text-primary-500">
                                <div class="font-medium">《现代前端测试策略》</div>
                                <div class="text-sm text-gray-500">探索端到端测试与组件测试的最佳实践</div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="hover:text-primary-500">
                                <div class="font-medium">《Playwright官方文档》</div>
                                <div class="text-sm text-gray-500">最权威的API参考与使用指南</div>
                            </a>
                        </li>
                    </ul>
                </div>
            </aside>

            <!-- 右侧主要内容 -->
            <div class="lg:w-3/4">
                <!-- 引言 -->
                <section class="mb-16">
                    <div class="mb-8">
                        <p class="mb-4"><span class="first-letter">P</span>laywright是由微软开发的现代化Web自动化测试工具，它为开发者和测试工程师提供了一个强大而灵活的方案，用于模拟用户与网页的交互。与传统自动化工具相比，Playwright采用了更先进的架构设计和通信机制，使其能够更加精确、稳定地操作网页元素和模拟用户行为，特别是在鼠标点击等基础交互方面。</p>
                        <p>本文将深入剖析Playwright的底层架构、DOM操作原理、鼠标点击模拟机制，以及高级交互功能，帮助读者全面了解Playwright如何实现自动化网页操作，并提供实用的最佳实践指导。</p>
                    </div>

                    <!-- 主要指标概览 -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                        <div class="card p-6 text-center">
                            <div class="text-4xl font-bold text-indigo-600 mb-2">3+</div>
                            <div class="text-gray-600 dark:text-gray-300">支持主流浏览器引擎</div>
                        </div>
                        <div class="card p-6 text-center">
                            <div class="text-4xl font-bold text-purple-600 mb-2">4+</div>
                            <div class="text-gray-600 dark:text-gray-300">编程语言支持</div>
                        </div>
                        <div class="card p-6 text-center">
                            <div class="text-4xl font-bold text-pink-600 mb-2">5+</div>
                            <div class="text-gray-600 dark:text-gray-300">选择器定位策略</div>
                        </div>
                        <div class="card p-6 text-center">
                            <div class="text-4xl font-bold text-blue-600 mb-2">30%</div>
                            <div class="text-gray-600 dark:text-gray-300">相比Selenium稳定性提升</div>
                        </div>
                    </div>
                </section>

                <!-- 底层架构与工作原理 -->
                <section id="architecture" class="mb-16">
                    <h2 class="text-3xl font-bold mb-6 pb-2 border-b-2 border-gray-200 dark:border-gray-700">
                        <i class="fas fa-server text-indigo-500 mr-2"></i>底层架构与工作原理
                    </h2>

                    <div id="arch-overview" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">架构概述</h3>
                        <div class="mb-6">
                            <p class="mb-4">Playwright采用客户端-服务端分离的架构设计，该架构使其能够支持多种编程语言并提供统一的浏览器自动化体验。</p>
                            
                            <div class="card p-6 mb-6">
                                <h4 class="font-bold mb-3">核心架构组件</h4>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-laptop-code mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <span class="font-medium">客户端层 (Client Layer)</span> - 提供多种编程语言的API接口，包括JavaScript/TypeScript、Python、Java和C#
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-server mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <span class="font-medium">服务端层 (Server Layer)</span> - 基于Node.js构建的核心引擎，处理来自客户端的指令并与浏览器通信
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-window-restore mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <span class="font-medium">浏览器驱动层 (Browser Driver Layer)</span> - 对不同浏览器引擎的封装和统一接口实现
                                        </div>
                                    </li>
                                </ul>
                            </div>

                            <div class="overflow-hidden rounded-lg mb-6">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiZzEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmOGY5ZmE7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlOWVjZWY7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgPC9kZWZzPg0KICA8cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNiZzEpIiAvPg0KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCw1MCkiPg0KICAgIDxyZWN0IHg9IjAiIHk9IjMwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjNDI4NWY0IiByeD0iNSIgcnk9IjUiIC8+DQogICAgPHRleHQgeD0iNzUiIHk9IjYwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxNHB4IiBmb250LXdlaWdodD0iYm9sZCI+Q2xpZW50PC90ZXh0Pg0KICAgIDx0ZXh0IHg9Ijc1IiB5PSI4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTBweCI+SlMvUHl0aG9uL0MjL0phdmE8L3RleHQ+DQoNCiAgICA8cmVjdCB4PSI1MDAiIHk9IjMwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjgwIiBmaWxsPSIjZmJiYzA1IiByeD0iNSIgcnk9IjUiIC8+DQogICAgPHRleHQgeD0iNTc1IiB5PSI2MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTRweCIgZm9udC13ZWlnaHQ9ImJvbGQiPlBsYXl3cmlnaHQgU2VydmVyPC90ZXh0Pg0KICAgIDx0ZXh0IHg9IjU3NSIgeT0iODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjEwcHgiPk5vZGUuanM8L3RleHQ+DQoNCiAgICA8IS0tIENvbm5lY3Rpb24gQXJyb3cgLS0+DQogICAgPGxpbmUgeDE9IjE1MCIgeTE9IjcwIiB4Mj0iNTAwIiB5Mj0iNzAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgLz4NCiAgICA8cG9seWdvbiBwb2ludHM9IjQ5MCw2NSA1MDAuNzAsIDUwMC43MCw3NSA0OTAsNzUiIGZpbGw9ImJsYWNrIiAvPg0KICAgIDx0ZXh0IHg9IjMyNSIgeT0iNjAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCI+V2ViU29ja2V0ICg8L3RleHQ+DQogICAgPHRleHQgeD0iMzI1IiB5PSI3NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4Ij5KU09OIGNvbW1hbmRzKTwvdGV4dD4NCg0KICAgIDwhLS0gQnJvd3NlcnMgLS0+DQogICAgPHJlY3QgeD0iMTAwIiB5PSIxOTAiIHdpZHRoPSIxMTAiIGhlaWdodD0iNjAiIGZpbGw9IiMzNGE4NTMiIHJ4PSI1IiByeT0iNSIgLz4NCiAgICA8dGV4dCB4PSIxNTUiIHk9IjIyNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTRweCI+Q2hyb21pdW08L3RleHQ+DQoNCiAgICA8cmVjdCB4PSIyNzAiIHk9IjE5MCIgd2lkdGg9IjExMCIgaGVpZ2h0PSI2MCIgZmlsbD0iI2VhNDMzNSIgcng9IjUiIHJ5PSI1IiAvPg0KICAgIDx0ZXh0IHg9IjMyNSIgeT0iMjI1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxNHB4Ij5GaXJlZm94PC90ZXh0Pg0KDQogICAgPHJlY3QgeD0iNDQwIiB5PSIxOTAiIHdpZHRoPSIxMTAiIGhlaWdodD0iNjAiIGZpbGw9IiM0Mjg1ZjQiIHJ4PSI1IiByeT0iNSIgLz4NCiAgICA8dGV4dCB4PSI0OTUiIHk9IjIyNSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTRweCI+V2ViS2l0PC90ZXh0Pg0KDQogICAgPCEtLSBCcm93c2VyIENvbm5lY3Rpb25zIC0tPg0KICAgIDxsaW5lIHgxPSI1MzAiIHkxPSIxMTAiIHgyPSIxNTUiIHkyPSIxOTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgLz4NCiAgICA8dGV4dCB4PSIzMjAiIHk9IjE0MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4Ij5DaHJvbWUgRGV2VG9vbHMgUHJvdG9jb2w8L3RleHQ+DQoNCiAgICA8bGluZSB4MT0iNTUwIiB5MT0iMTEwIiB4Mj0iMzI1IiB5Mj0iMTkwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIC8+DQogICAgPHRleHQgeD0iNDUwIiB5PSIxNTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMTJweCI+RmlyZWZveCBQcm90b2NvbDwvdGV4dD4NCg0KICAgIDxsaW5lIHgxPSI1NzAiIHkxPSIxMTAiIHgyPSI0OTUiIHkyPSIxOTAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgLz4NCiAgICA8dGV4dCB4PSI1NTAiIHk9IjE1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxMnB4Ij5XZWJLaXQgUHJvdG9jb2w8L3RleHQ+DQogIDwvZz4NCjwvc3ZnPg0K" alt="Playwright架构图" class="w-full">
                            </div>
                        </div>
                    </div>

                    <div id="browser-communication" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">浏览器通信机制</h3>
                        
                        <div class="mb-4">
                            <p>Playwright与浏览器之间的通信是通过特定协议实现的，这些协议确保了自动化操作的高效性和稳定性：</p>
                        </div>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                            <div class="card p-6">
                                <h4 class="font-bold mb-3 text-indigo-600">Playwright与Chromium通信</h4>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span>使用Chrome DevTools Protocol (CDP)</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span>基于WebSocket的实时双向通信</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span>允许深度检测和控制浏览器内部状态</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="card p-6">
                                <h4 class="font-bold mb-3 text-indigo-600">Firefox和WebKit通信</h4>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span>使用Playwright实现的类CDP协议</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span>确保API一致性和跨浏览器兼容性</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span>统一不同浏览器之间的功能差异</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="card p-6 mb-6">
                            <h4 class="font-bold mb-4">通信协议优势</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full">
                                    <thead>
                                        <tr class="bg-gray-100 dark:bg-gray-700">
                                            <th class="py-2 px-4 border">特性</th>
                                            <th class="py-2 px-4 border">Playwright (WebSocket)</th>
                                            <th class="py-2 px-4 border">传统HTTP协议 (Selenium)</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="py-2 px-4 border">连接持久性</td>
                                            <td class="py-2 px-4 border text-green-600"><i class="fas fa-check mr-1"></i> 单一持久连接</td>
                                            <td class="py-2 px-4 border text-red-600"><i class="fas fa-times mr-1"></i> 每个命令重新建立连接</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border">通信模式</td>
                                            <td class="py-2 px-4 border text-green-600"><i class="fas fa-check mr-1"></i> 双向实时通信</td>
                                            <td class="py-2 px-4 border text-red-600"><i class="fas fa-times mr-1"></i> 请求-响应模式</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border">性能</td>
                                            <td class="py-2 px-4 border text-green-600"><i class="fas fa-check mr-1"></i> 低延迟、低开销</td>
                                            <td class="py-2 px-4 border text-red-600"><i class="fas fa-times mr-1"></i> 较高延迟、连接开销大</td>
                                        </tr>
                                        <tr>
                                            <td class="py-2 px-4 border">事件通知</td>
                                            <td class="py-2 px-4 border text-green-600"><i class="fas fa-check mr-1"></i> 支持浏览器实时事件推送</td>
                                            <td class="py-2 px-4 border text-red-600"><i class="fas fa-times mr-1"></i> 需要轮询获取状态</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div id="cross-browser" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">跨浏览器兼容性实现</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright的一大亮点是其出色的跨浏览器兼容性支持，使开发者能够使用同一套代码在不同浏览器中运行测试。</p>

                            <div class="overflow-hidden rounded-lg mb-6">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiZzEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmOGY5ZmE7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlOWVjZWY7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgPC9kZWZzPg0KICA8cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNiZzEpIiAvPg0KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCwzMCkiPg0KICAgIDwhLS0gVGl0bGUgLS0+DQogICAgPHRleHQgeD0iMzUwIiB5PSIyMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIyMHB4IiBmb250LXdlaWdodD0iYm9sZCI+UGxheXdyaWdodCDot53nprsgQVBJIOWFg+WkhOaAp+WunueOrzwvdGV4dD4NCg0KICAgIDwhLS0gVW5pZmllZCBBUEkgLS0+DQogICAgPHJlY3QgeD0iMTAwIiB5PSI1MCIgd2lkdGg9IjUwMCIgaGVpZ2h0PSI1MCIgZmlsbD0iIzNGNTFCNSIgcng9IjUiIHJ5PSI1IiAvPg0KICAgIDx0ZXh0IHg9IjM1MCIgeT0iODUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2cHgiPlBsYXl3cmlnaHQg57Ov5LiA5peg5YWD5aSEIEFQSSDmjqXlj6M8L3RleHQ+DQoNCiAgICA8IS0tIFByb3RvY29sIEFkYXB0ZXJzIC0tPg0KICAgIDxyZWN0IHg9IjEwMCIgeT0iMTMwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjQwIiBmaWxsPSIjRkZDMTA3IiByeD0iNSIgcnk9IjUiIC8+DQogICAgPHRleHQgeD0iMTcwIiB5PSIxNTUiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMzMzMzMzMiIGZvbnQtc2l6ZT0iMTJweCI+Q2hyb21pdW0g5Y2P6K6u6YCC6YWN5Zmo8L90ZXh0Pg0KDQogICAgPHJlY3QgeD0iMjgwIiB5PSIxMzAiIHdpZHRoPSIxNDAiIGhlaWdodD0iNDAiIGZpbGw9IiNGRjU3MjIiIHJ4PSI1IiByeT0iNSIgLz4NCiAgICA8dGV4dCB4PSIzNTAiIHk9IjE1NSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTJweCI+RmlyZWZveSDljY/orq7pgILphY3lmag8L3RleHQ+DQoNCiAgICA8cmVjdCB4PSI0NjAiIHk9IjEzMCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSI0MCIgZmlsbD0iIzlDMjdCMCIgcng9IjUiIHJ5PSI1IiAvPg0KICAgIDx0ZXh0IHg9IjUzMCIgeT0iMTU1IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmaWxsPSJ3aGl0ZSIgZm9udC1zaXplPSIxMnB4Ij5XZWJLaXQg5Y2P6K6u6YCC6YWN5ZmoPC90ZXh0Pg0KDQogICAgPCEtLSBDb25uZWN0aW5nIEFycm93cyAtLT4NCiAgICA8bGluZSB4MT0iMTcwIiB5MT0iMTAwIiB4Mj0iMTcwIiB5Mj0iMTMwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIC8+DQogICAgPHBvbHlnb24gcG9pbnRzPSIxNjUsMTIwIDE3MCwxMzAgMTc1LDEyMCIgZmlsbD0iYmxhY2siIC8+DQoNCiAgICA8bGluZSB4MT0iMzUwIiB5MT0iMTAwIiB4Mj0iMzUwIiB5Mj0iMTMwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIC8+DQogICAgPHBvbHlnb24gcG9pbnRzPSIzNDUsMTIwIDM1MCwxMzAgMzU1LDEyMCIgZmlsbD0iYmxhY2siIC8+DQoNCiAgICA8bGluZSB4MT0iNTMwIiB5MT0iMTAwIiB4Mj0iNTMwIiB5Mj0iMTMwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIC8+DQogICAgPHBvbHlnb24gcG9pbnRzPSI1MjUsMTIwIDUzMCwxMzAgNTM1LDEyMCIgZmlsbD0iYmxhY2siIC8+DQoNCiAgICA8IS0tIEJyb3dzZXJzIC0tPg0KICAgIDxyZWN0IHg9IjEwMCIgeT0iMjAwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjRkZDMTA3IiByeD0iNSIgcnk9IjUiIC8+DQogICAgPHRleHQgeD0iMTcwIiB5PSIyMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IiMzMzMzMzMiIGZvbnQtc2l6ZT0iMTZweCI+Q2hyb21pdW08L3RleHQ+DQoNCiAgICA8cmVjdCB4PSIyODAiIHk9IjIwMCIgd2lkdGg9IjE0MCIgaGVpZ2h0PSI1MCIgZmlsbD0iI0ZGNTU3MjIiIHJ4PSI1IiByeT0iNSIgLz4NCiAgICA8dGV4dCB4PSIzNTAiIHk9IjIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0id2hpdGUiIGZvbnQtc2l6ZT0iMTZweCI+RmlyZWZveDwvdGV4dD4NCg0KICAgIDxyZWN0IHg9IjQ2MCIgeT0iMjAwIiB3aWR0aD0iMTQwIiBoZWlnaHQ9IjUwIiBmaWxsPSIjOUMyN0IwIiByeD0iNSIgcnk9IjUiIC8+DQogICAgPHRleHQgeD0iNTMwIiB5PSIyMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZpbGw9IndoaXRlIiBmb250LXNpemU9IjE2cHgiPldlYktpdDwvdGV4dD4NCg0KICAgIDwhLS0gQ29ubmVjdGluZyBBcnJvd3MgLS0+DQogICAgPGxpbmUgeDE9IjE3MCIgeTE9IjE3MCIgeDI9IjE3MCIgeTI9IjIwMCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIiAvPg0KICAgIDxwb2x5Z29uIHBvaW50cz0iMTY1LDE5MCAxNzAsMjAwIDE3NSwxOTAiIGZpbGw9ImJsYWNrIiAvPg0KDQogICAgPGxpbmUgeDE9IjM1MCIgeTE9IjE3MCIgeDI9IjM1MCIgeTI9IjIwMCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIiAvPg0KICAgIDxwb2x5Z29uIHBvaW50cz0iMzQ1LDE5MCAzNTAsMjAwIDM1NSwxOTAiIGZpbGw9ImJsYWNrIiAvPg0KDQogICAgPGxpbmUgeDE9IjUzMCIgeTE9IjE3MCIgeDI9IjUzMCIgeTI9IjIwMCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIiAvPg0KICAgIDxwb2x5Z29uIHBvaW50cz0iNTI1LDE5MCA1MzAsMjAwIDUzNSwxOTAiIGZpbGw9ImJsYWNrIiAvPg0KDQogICAgPCEtLSBGZWF0dXJlIEJveCAtLT4NCiAgICA8cmVjdCB4PSI1MCIgeT0iMjgwIiB3aWR0aD0iNjAwIiBoZWlnaHQ9IjgwIiBmaWxsPSJ3aGl0ZSIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIxIiByeD0iNSIgcnk9IjUiIC8+DQogICAgPHRleHQgeD0iNjAiIHk9IjMwMCIgZm9udC1zaXplPSIxNHB4IiBmb250LXdlaWdodD0iYm9sZCI+6Leo5Zu+5rWP6KeI5aSE55CGPC90ZXh0Pg0KICAgIDx0ZXh0IHg9IjYwIiB5PSIzMjUiIGZvbnQtc2l6ZT0iMTJweCI+4oCiIOe7hOS7tuWKn+iDvei2iua2puWcqOagh+WHhuWcqOWIm+W7uiAoPHRzcGFuIGZpbGw9ImJsdWUiPmJyb3dzZXIuZ2V0QnlSb2xlKCdidXR0b24nKS5jbGljaygpPC90c3Bhbj4g5ZCM5qC35Y+v6YGL6KGM5Zyo5omA5pyJ5rWP6KeI5Zmo5Lit77yJPC90ZXh0Pg0KICAgIDx0ZXh0IHg9IjYwIiB5PSIzNTAiIGZvbnQtc2l6ZT0iMTJweCI+4oCiIOivtOaYjuWPkeWwhOS7iuayoeacie+8jOeUqOaIt+eUqOWQjOS4gOS7o+eggeWPr+ebkeWQrOS4jeWQjOa1j+iniOWZqDwvdGV4dD4NCiAgPC9nPg0KPC9zdmc+DQo=" alt="Playwright跨浏览器兼容性" class="w-full">
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-2 text-indigo-600 flex items-center">
                                        <i class="fas fa-cubes mr-2"></i>统一API层
                                    </h4>
                                    <p>提供统一的API接口，抽象浏览器差异，使相同的代码可以在Chromium、Firefox和WebKit上运行</p>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-2 text-indigo-600 flex items-center">
                                        <i class="fas fa-download mr-2"></i>专用浏览器二进制文件
                                    </h4>
                                    <p>提供经过修补的特定浏览器版本，确保浏览器行为的一致性，简化跨平台部署</p>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-2 text-indigo-600 flex items-center">
                                        <i class="fas fa-search mr-2"></i>高级选择器引擎
                                    </h4>
                                    <p>实现了多样化的选择器策略，降低因DOM结构变化导致的测试失败风险</p>
                                </div>
                            </div>
                        </div>

                        <!-- 代码示例 -->
                        <div class="card p-6 code-block">
                            <h4 class="font-bold mb-3">跨浏览器运行示例</h4>
                            <pre class="text-sm font-mono overflow-x-auto"><code>// 相同的代码可以运行在不同浏览器上
const { chromium, firefox, webkit } = require('playwright');

for (const browserType of [chromium, firefox, webkit]) {
  const browser = await browserType.launch();
  const page = await browser.newPage();
  await page.goto('https://example.com');
  
  // 使用相同的选择器在所有浏览器中工作
  await page.getByRole('button', { name: '登录' }).click();
  await page.getByLabel('用户名').fill('admin');
  
  await browser.close();
}</code></pre>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">内部分层结构</h3>
                        <div class="mb-4">
                            <p class="mb-4">Playwright的API结构反映了浏览器的层次结构，设计清晰且层次分明：</p>
                        </div>
                        
                        <div class="overflow-hidden rounded-lg mb-6">
                            <div class="mermaid">
graph TD
    Browser[Browser<br/>浏览器实例] --> BrowserContext1[BrowserContext 1<br/>浏览器上下文]
    Browser --> BrowserContext2[BrowserContext 2<br/>浏览器上下文]
    BrowserContext1 --> Page1[Page 1<br/>浏览器标签页]
    BrowserContext1 --> Page2[Page 2<br/>浏览器标签页]
    BrowserContext2 --> Page3[Page 3<br/>浏览器标签页]
    Page1 --> MainFrame1[MainFrame<br/>主框架]
    Page1 --> IFrame1[IFrame<br/>嵌入框架]
    MainFrame1 --> Elements1[ElementHandles<br/>页面元素]
    IFrame1 --> Elements2[ElementHandles<br/>页面元素]
    
    classDef browser fill:#4285f4,stroke:#333,stroke-width:1px,color:white;
    classDef context fill:#fbbc05,stroke:#333,stroke-width:1px;
    classDef page fill:#34a853,stroke:#333,stroke-width:1px,color:white;
    classDef frame fill:#ea4335,stroke:#333,stroke-width:1px,color:white;
    classDef element fill:#9c27b0,stroke:#333,stroke-width:1px,color:white;
    
    class Browser browser;
    class BrowserContext1,BrowserContext2 context;
    class Page1,Page2,Page3 page;
    class MainFrame1,IFrame1 frame;
    class Elements1,Elements2 element;
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
                            <div class="card p-6">
                                <h4 class="font-bold mb-3">Browser & BrowserContext</h4>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-browser mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <strong>Browser</strong> - 代表一个浏览器实例，管理浏览器的全局状态
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-window-restore mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <strong>BrowserContext</strong> - 独立的浏览器会话，拥有独立的Cookie、LocalStorage和缓存，类似于"隐身模式"
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="card p-6">
                                <h4 class="font-bold mb-3">Page & Frame</h4>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-file mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <strong>Page</strong> - 对应浏览器中的单个标签页，提供页面导航、交互和检查功能
                                        </div>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-clone mt-1 mr-2 text-indigo-500"></i>
                                        <div>
                                            <strong>Frame</strong> - 表示页面中的框架，包括主框架和iframe子框架，提供在特定框架上下文中执行操作的能力
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- DOM操作与选择器系统 -->
                <section id="dom-operations" class="mb-16">
                    <h2 class="text-3xl font-bold mb-6 pb-2 border-b-2 border-gray-200 dark:border-gray-700">
                        <i class="fas fa-code text-purple-500 mr-2"></i>DOM操作与选择器系统
                    </h2>

                    <div id="selector-types" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">选择器类型与策略</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright提供了多种选择器类型，使开发者能够以最适合的方式定位和操作DOM元素。与传统自动化工具相比，它的选择器系统更现代、更强大，更适合当代Web应用的复杂性。</p>
                        </div>

                        <div class="tabs mb-4">
                            <div class="tab active" data-tab="basic">基础选择器</div>
                            <div class="tab" data-tab="user-friendly">用户友好选择器</div>
                            <div class="tab" data-tab="advanced">高级选择器</div>
                        </div>
                        
                        <div class="tab-content active" id="basic-content">
                            <div class="card p-6 mb-4">
                                <h4 class="font-bold mb-4">CSS、XPath与ID选择器</h4>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">CSS选择器</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>page.locator('div.container > button').click();
page.locator('input[name="username"]').fill('admin');</code></pre>
                                    </div>
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">XPath选择器</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>page.locator('xpath=//button[contains(text(), "登录")]').click();
page.locator('//div[@id="main"]/h1').textContent();</code></pre>
                                    </div>
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">ID选择器</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>page.locator('#login-button').click();
page.locator('#username').fill('admin');</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="user-friendly-content">
                            <div class="card p-6 mb-4">
                                <h4 class="font-bold mb-4">语义化选择器API</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">基于角色与标签</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 基于角色
page.getByRole('button', { name: '登录' }).click();

// 基于标签
page.getByLabel('用户名').fill('admin');
page.getByLabel('记住我').check();</code></pre>
                                    </div>
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">基于文本与占位符</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 基于文本
page.getByText('欢迎使用').isVisible();
page.getByText(/价格：\d+元/).click();

// 基于占位符
page.getByPlaceholder('请输入搜索关键词').fill('测试');</code></pre>
                                    </div>
                                </div>
                                <div class="mt-4 border p-4 rounded-lg">
                                    <h5 class="font-semibold mb-2 text-purple-600">基于测试ID</h5>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 使用特定的测试属性
page.getByTestId('submit-button').click();
page.getByTestId('user-profile').isVisible();</code></pre>
                                </div>
                            </div>
                        </div>
                        
                        <div class="tab-content" id="advanced-content">
                            <div class="card p-6 mb-4">
                                <h4 class="font-bold mb-4">高级定位策略</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">框架选择器</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// React组件选择器
page.locator('_react=Button[text="提交"]').click();

// Vue组件选择器
page.locator('_vue=LoginForm').locator('button').click();</code></pre>
                                    </div>
                                    <div class="border p-4 rounded-lg">
                                        <h5 class="font-semibold mb-2 text-purple-600">布局选择器</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 基于相对位置的选择
page.locator('button:right-of(:text("价格"))').click();
page.locator('div:near(.error-message)').isVisible();
page.locator('input:above(#submit)').fill('内容');</code></pre>
                                    </div>
                                </div>
                                <div class="mt-4 border p-4 rounded-lg">
                                    <h5 class="font-semibold mb-2 text-purple-600">选择器链和过滤</h5>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 链式选择器和过滤
page.getByRole('listitem')
    .filter({ hasText: '产品A' })
    .getByRole('button', { name: '添加到购物车' })
    .click();

// 使用正则表达式过滤
page.getByRole('listitem')
    .filter({ hasText: /产品\d+/ })
    .first()
    .click();</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6">
                            <div class="card p-6">
                                <h4 class="font-bold mb-3">选择器优先级建议</h4>
                                <ol class="list-decimal pl-5 space-y-2">
                                    <li><span class="font-medium">基于角色</span>：首选 <code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">page.getByRole()</code> - 与辅助功能技术一致，提高可访问性</li>
                                    <li><span class="font-medium">基于标签文本</span>：使用 <code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">page.getByLabel()</code> - 用于表单控件</li>
                                    <li><span class="font-medium">基于测试ID</span>：使用 <code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">page.getByTestId()</code> - 当专门为自动化添加了data属性时</li>
                                    <li><span class="font-medium">基于文本内容</span>：使用 <code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">page.getByText()</code> - 当元素具有唯一可见文本时</li>
                                    <li><span class="font-medium">CSS选择器</span>：当上述方法不适用时使用 <code class="bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">page.locator()</code></li>
                                </ol>
                            </div>
                        </div>
                    </div>

                    <div id="auto-waiting" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">自动等待机制</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright的自动等待机制是其核心优势之一，它消除了传统自动化测试中大量显式等待语句的需求，大大提高了测试的稳定性和可靠性。</p>
                            
                            <div class="overflow-hidden rounded-lg mb-6">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiZzEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmOGY5ZmE7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlOWVjZWY7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgPC9kZWZzPg0KICA8cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNiZzEpIiAvPg0KICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1MCwzMCkiPg0KICAgIDx0ZXh0IHg9IjM1MCIgeT0iMzAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtc2l6ZT0iMjRweCIgZm9udC13ZWlnaHQ9ImJvbGQiPlBsYXl3cmlnaHQg6Ieq5Yqo562J5b6F5py65Yi2PC90ZXh0Pg0KDQogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTAsNzApIj4NCiAgICAgIDxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI2MDAiIGhlaWdodD0iNTAiIGZpbGw9IndoaXRlIiBzdHJva2U9ImJsYWNrIiByeD0iNSIgcnk9IjUiIC8+DQogICAgICA8dGV4dCB4PSIxMCIgeT0iMzAiIGZvbnQtc2l6ZT0iMTZweCIgZm9udC13ZWlnaHQ9ImJvbGQiPjEuIOetieW+heWFg+e0oOWHuuePvuWcqCBET00g5LitPC90ZXh0Pg0KICAgICAgPGNpcmNsZSBjeD0iNTgwIiBjeT0iMjUiIHI9IjEwIiBmaWxsPSIjMzRhODUzIiAvPg0KICAgICAgPHRleHQgeD0iNTgwIiB5PSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNHB4IiBmaWxsPSJ3aGl0ZSI+4pyTPC90ZXh0Pg0KICAgIDwvZz4NCg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLDEzMCkiPg0KICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1MCIgZmlsbD0id2hpdGUiIHN0cm9rZT0iYmxhY2siIHJ4PSI1IiByeT0iNSIgLz4NCiAgICAgIDx0ZXh0IHg9IjEwIiB5PSIzMCIgZm9udC1zaXplPSIxNnB4IiBmb250LXdlaWdodD0iYm9sZCI+Mi4g562J5b6F5YWD57Sg5Y+v6KeB77yI6Z2ebWRpc3BsYXk6bm9uZeOAgXZpc2liaWxpdHk6aGlkZGVu77yJPC90ZXh0Pg0KICAgICAgPGNpcmNsZSBjeD0iNTgwIiBjeT0iMjUiIHI9IjEwIiBmaWxsPSIjMzRhODUzIiAvPg0KICAgICAgPHRleHQgeD0iNTgwIiB5PSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNHB4IiBmaWxsPSJ3aGl0ZSI+4pyTPC90ZXh0Pg0KICAgIDwvZz4NCg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLDE5MCkiPg0KICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1MCIgZmlsbD0id2hpdGUiIHN0cm9rZT0iYmxhY2siIHJ4PSI1IiByeT0iNSIgLz4NCiAgICAgIDx0ZXh0IHg9IjEwIiB5PSIzMCIgZm9udC1zaXplPSIxNnB4IiBmb250LXdlaWdodD0iYm9sZCI+My4g562J5b6F5YWD57Sg5YGc5q2i56e75Yqo77yIQ1NT6L2s5o2i5a6M5oiQ77yJPC90ZXh0Pg0KICAgICAgPGNpcmNsZSBjeD0iNTgwIiBjeT0iMjUiIHI9IjEwIiBmaWxsPSIjMzRhODUzIiAvPg0KICAgICAgPHRleHQgeD0iNTgwIiB5PSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNHB4IiBmaWxsPSJ3aGl0ZSI+4pyTPC90ZXh0Pg0KICAgIDwvZz4NCg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLDI1MCkiPg0KICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1MCIgZmlsbD0id2hpdGUiIHN0cm9rZT0iYmxhY2siIHJ4PSI1IiByeT0iNSIgLz4NCiAgICAgIDx0ZXh0IHg9IjEwIiB5PSIzMCIgZm9udC1zaXplPSIxNnB4IiBmb250LXdlaWdodD0iYm9sZCI+NC4g562J5b6F5YWD57Sg6IO95a655Zyw6K6w5pW055qE5LqL5Lu277yI5LiN6KKr6YeH6aG/77yJPC90ZXh0Pg0KICAgICAgPGNpcmNsZSBjeD0iNTgwIiBjeT0iMjUiIHI9IjEwIiBmaWxsPSIjMzRhODUzIiAvPg0KICAgICAgPHRleHQgeD0iNTgwIiB5PSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNHB4IiBmaWxsPSJ3aGl0ZSI+4pyTPC90ZXh0Pg0KICAgIDwvZz4NCg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLDMxMCkiPg0KICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjYwMCIgaGVpZ2h0PSI1MCIgZmlsbD0iIzM0YTg1MyIgc3Ryb2tlPSJibGFjayIgcng9IjUiIHJ5PSI1IiBvcGFjaXR5PSIwLjgiIC8+DQogICAgICA8dGV4dCB4PSIxMCIgeT0iMzAiIGZvbnQtc2l6ZT0iMTZweCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIj41LiDmiafooYzlgLzkuobvvIjngrnlh7vvvIzloavlhpnvvIznm7jlhbPnrYnvvIk8L3RleHQ+DQogICAgICA8Y2lyY2xlIGN4PSI1ODAiIGN5PSIyNSIgcj0iMTAiIGZpbGw9IndoaXRlIiAvPg0KICAgICAgPHRleHQgeD0iNTgwIiB5PSIzMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNHB4IiBmaWxsPSIjMzRhODUzIj7inJM8L3RleHQ+DQogICAgPC9nPg0KDQogICAgPCEtLSBBcnJvd3MgYmV0d2VlbiBzdGVwcyAtLT4NCiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNTAsNzApIj4NCiAgICAgIDxsaW5lIHgxPSIwIiB5MT0iNTAiIHgyPSIwIiB5Mj0iNjAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgLz4NCiAgICAgIDxwb2x5Z29uIHBvaW50cz0iLTUsMTAgNSwxMCAwLDE1IiBmaWxsPSJibGFjayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCw1NSkiIC8+DQogICAgPC9nPg0KDQogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzUwLDEzMCkiPg0KICAgICAgPGxpbmUgeDE9IjAiIHkxPSI1MCIgeDI9IjAiIHkyPSI2MCIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIyIiAvPg0KICAgICAgPHBvbHlnb24gcG9pbnRzPSItNSwxMCA1LDEwIDAsMTUiIGZpbGw9ImJsYWNrIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDU1KSIgLz4NCiAgICA8L2c+DQoNCiAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgzNTAsMTkwKSI+DQogICAgICA8bGluZSB4MT0iMCIgeTE9IjUwIiB4Mj0iMCIgeTI9IjYwIiBzdHJva2U9ImJsYWNrIiBzdHJva2Utd2lkdGg9IjIiIC8+DQogICAgICA8cG9seWdvbiBwb2ludHM9Ii01LDEwIDUsMTAgMCwxNSIgZmlsbD0iYmxhY2siIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsNTUpIiAvPg0KICAgIDwvZz4NCg0KICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDM1MCwyNTApIj4NCiAgICAgIDxsaW5lIHgxPSIwIiB5MT0iNTAiIHgyPSIwIiB5Mj0iNjAiIHN0cm9rZT0iYmxhY2siIHN0cm9rZS13aWR0aD0iMiIgLz4NCiAgICAgIDxwb2x5Z29uIHBvaW50cz0iLTUsMTAgNSwxMCAwLDE1IiBmaWxsPSJibGFjayIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCw1NSkiIC8+DQogICAgPC9nPg0KICA8L2c+DQo8L3N2Zz4NCg==" alt="Playwright自动等待机制" class="w-full">
                            </div>
                            
                            <div class="card p-6 mb-6">
                                <h4 class="font-bold mb-3">自动等待过程</h4>
                                <p class="mb-4">当执行点击、填充等操作时，Playwright会<span class="highlight">自动等待以下条件满足</span>，确保操作在正确的时机执行：</p>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span><strong>DOM就绪</strong> - 元素在DOM中存在</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span><strong>可见性</strong> - 元素可见（非display:none和visibility:hidden）</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span><strong>稳定性</strong> - 元素不在移动或动画中</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span><strong>可交互性</strong> - 元素可以接收事件（不被其他元素遮挡）</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                        <span><strong>启用状态</strong> - 对于表单控件，元素未被禁用</span>
                                    </li>
                                </ul>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-purple-600">Playwright自动等待</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 无需显式等待代码
await page.getByRole('button', { 
  name: '提交' 
}).click();</code></pre>
                                    <p class="mt-3 text-sm text-gray-600 dark:text-gray-400">Playwright自动等待按钮可点击，无需额外代码</p>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-red-600">Selenium显式等待</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 需要显式等待代码
WebDriverWait(driver, 10).until(
  EC.element_to_be_clickable(
    (By.XPATH, "//button[text()='提交']")
  )
).click();</code></pre>
                                    <p class="mt-3 text-sm text-gray-600 dark:text-gray-400">Selenium需要手动添加等待代码，增加复杂性</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="shadow-dom" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">Shadow DOM支持</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright能够无缝地穿透Shadow DOM边界，这是与传统自动化工具的一个重要区别，对于测试使用Web组件的现代应用至关重要。</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-purple-600">Playwright操作Shadow DOM</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto h-40"><code>// 无需特殊语法，直接定位Shadow DOM内的元素
await page.getByText('Shadow DOM中的文本').click();

// 可以用CSS选择器穿透Shadow DOM
await page.locator('custom-element >> internal-button').click();

// 定位多层嵌套的Shadow DOM元素
await page.locator('my-app')
  .locator('user-panel')
  .locator('settings-section input')
  .fill('值');</code></pre>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-red-600">传统工具操作Shadow DOM</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto h-40"><code>// Selenium需要复杂的JavaScript执行
driver.executeScript(`
  return document.querySelector('custom-element')
    .shadowRoot
    .querySelector('internal-button')
    .click();
`);

// 对于多层嵌套，代码更复杂
driver.executeScript(`
  return document.querySelector('my-app')
    .shadowRoot.querySelector('user-panel')
    .shadowRoot.querySelector('settings-section')
    .shadowRoot.querySelector('input')
    .value = '值';
`);</code></pre>
                                </div>
                            </div>
                            
                            <div class="card p-6">
                                <div class="flex items-start mb-4">
                                    <i class="fas fa-lightbulb mr-2 text-yellow-500 text-xl"></i>
                                    <h4 class="font-bold">Shadow DOM穿透的重要性</h4>
                                </div>
                                <p class="mb-3">Shadow DOM是Web组件的核心技术，它允许开发者创建封装的DOM树，使组件更加模块化和可重用。然而，这种封装对传统自动化工具造成了挑战：</p>
                                <ul class="space-y-2">
                                    <li class="flex items-start">
                                        <i class="fas fa-angle-right mt-1 mr-2 text-purple-500"></i>
                                        <span>现代前端框架如Angular、React和Vue在内部使用Shadow DOM或虚拟DOM</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-angle-right mt-1 mr-2 text-purple-500"></i>
                                        <span>越来越多的Web应用采用Web组件架构，使用自定义元素和Shadow DOM</span>
                                    </li>
                                    <li class="flex items-start">
                                        <i class="fas fa-angle-right mt-1 mr-2 text-purple-500"></i>
                                        <span>Playwright的Shadow DOM穿透能力使其能够测试这些现代Web应用，而无需特殊处理</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 传统工具对比 -->
                    <div class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">与传统自动化工具的对比</h3>
                        
                        <div class="card p-6">
                            <h4 class="font-bold mb-4">Playwright vs Selenium</h4>
                            <div class="overflow-x-auto">
                                <table class="min-w-full border-collapse">
                                    <thead>
                                        <tr class="bg-gray-100 dark:bg-gray-700">
                                            <th class="border p-3 text-left">特性</th>
                                            <th class="border p-3 text-left">Playwright</th>
                                            <th class="border p-3 text-left">Selenium</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="border p-3 font-medium">选择器能力</td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                                                    <span>丰富的内置语义选择器，布局选择器，链式API</span>
                                                </div>
                                            </td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-minus-circle text-gray-500 mr-2"></i>
                                                    <span>基础CSS和XPath，需要自行封装高级选择器</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">等待机制</td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                                                    <span>智能自动等待，无需显式等待代码</span>
                                                </div>
                                            </td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-minus-circle text-gray-500 mr-2"></i>
                                                    <span>需要显式编写等待语句，容易产生脆弱测试</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">Shadow DOM支持</td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                                                    <span>原生支持Shadow DOM穿透</span>
                                                </div>
                                            </td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-minus-circle text-gray-500 mr-2"></i>
                                                    <span>需要JavaScript执行，复杂且脆弱</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">调试功能</td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                                                    <span>Inspector工具和增强的错误信息</span>
                                                </div>
                                            </td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-minus-circle text-gray-500 mr-2"></i>
                                                    <span>有限的错误诊断和调试功能</span>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">框架支持</td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-plus-circle text-green-500 mr-2"></i>
                                                    <span>针对React/Vue等现代框架的特殊支持</span>
                                                </div>
                                            </td>
                                            <td class="border p-3">
                                                <div class="flex items-center">
                                                    <i class="fas fa-minus-circle text-gray-500 mr-2"></i>
                                                    <span>无现代框架特殊支持</span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 鼠标点击模拟机制 -->
                <section id="click-mechanism" class="mb-16">
                    <h2 class="text-3xl font-bold mb-6 pb-2 border-b-2 border-gray-200 dark:border-gray-700">
                        <i class="fas fa-mouse-pointer text-pink-500 mr-2"></i>鼠标点击模拟机制
                    </h2>

                    <div id="click-implementation" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">点击实现流程</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright的点击操作不仅仅是简单地触发DOM事件，而是经过精心设计的一系列步骤，确保点击行为尽可能地接近真实用户交互。</p>
                            
                            <div class="card p-6 mb-6">
                                <h4 class="font-bold mb-4">点击操作执行步骤</h4>
                                
                                <div class="relative">
                                    <div class="absolute left-4 inset-y-0 w-0.5 bg-gray-200 dark:bg-gray-700"></div>
                                    
                                    <div class="relative pl-10 pb-8">
                                        <div class="absolute left-3 -ml-1.5 mt-1.5 w-4 h-4 rounded-full bg-indigo-500"></div>
                                        <h5 class="font-bold mb-2">1. 自动等待元素准备就绪</h5>
                                        <div class="pl-4">
                                            <ul class="list-disc space-y-1 text-sm">
                                                <li>等待元素在DOM中可用</li>
                                                <li>等待元素变为可见（非隐藏）</li>
                                                <li>等待元素不再移动（动画完成）</li>
                                                <li>等待元素能够接收点击事件（不被遮挡）</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="relative pl-10 pb-8">
                                        <div class="absolute left-3 -ml-1.5 mt-1.5 w-4 h-4 rounded-full bg-purple-500"></div>
                                        <h5 class="font-bold mb-2">2. 自动滚动元素到视图中</h5>
                                        <div class="pl-4">
                                            <ul class="list-disc space-y-1 text-sm">
                                                <li>如果元素不在视口中，自动滚动页面直到元素可见</li>
                                                <li>计算元素在页面上的精确位置和尺寸</li>
                                                <li>确定点击的精确坐标（默认为元素中心点）</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="relative pl-10 pb-8">
                                        <div class="absolute left-3 -ml-1.5 mt-1.5 w-4 h-4 rounded-full bg-pink-500"></div>
                                        <h5 class="font-bold mb-2">3. 执行鼠标事件序列</h5>
                                        <div class="pl-4">
                                            <ul class="list-disc space-y-1 text-sm">
                                                <li>按照鼠标事件的标准顺序触发事件：mousedown → mouseup → click</li>
                                                <li>应用任何特定的修饰键（如Shift、Ctrl等）</li>
                                                <li>根据选项设置（如delay、button）调整点击行为</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <div class="relative pl-10">
                                        <div class="absolute left-3 -ml-1.5 mt-1.5 w-4 h-4 rounded-full bg-blue-500"></div>
                                        <h5 class="font-bold mb-2">4. 等待点击后的反应</h5>
                                        <div class="pl-4">
                                            <ul class="list-disc space-y-1 text-sm">
                                                <li>等待可能触发的页面导航完成</li>
                                                <li>等待可能出现的对话框（如果已配置）</li>
                                                <li>等待可能发起的网络请求完成</li>
                                                <li>除非显式禁用（noWaitAfter: true），否则默认等待上述操作</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-center">page.click API使用示例</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 简单点击
await page.click('button');

// 带选择器的点击
await page.click('#submit-button');

// 等待元素出现并点击
await page.click('text=登录', { timeout: 5000 });

// 对指定文本的按钮进行点击
await page.click('button:has-text("提交")');</code></pre>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-center">locator.click API使用示例</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 使用locator定位并点击
const button = page.locator('#submit-button');
await button.click();

// 使用角色定位并点击
await page.getByRole('button', { name: '提交' }).click();

// 先找到容器，再在容器中点击按钮
const form = page.locator('form#login');
await form.locator('button[type="submit"]').click();</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="click-options" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">点击选项解析</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright提供了丰富的点击选项，允许精确控制点击行为的各个方面，模拟各种真实场景下的用户点击行为。</p>
                            
                            <div class="overflow-x-auto mb-6">
                                <table class="min-w-full border-collapse">
                                    <thead>
                                        <tr class="bg-gray-100 dark:bg-gray-700">
                                            <th class="border p-3 text-left">选项参数</th>
                                            <th class="border p-3 text-left">说明</th>
                                            <th class="border p-3 text-left">示例</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="border p-3 font-medium">position</td>
                                            <td class="border p-3">设置点击位置，默认为元素中心</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{position: {x: 10, y: 20}}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">button</td>
                                            <td class="border p-3">设置鼠标按钮，可选值为"left"、"middle"、"right"</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{button: "right"}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">clickCount</td>
                                            <td class="border p-3">设置点击次数，默认为1，用于双击/多击</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{clickCount: 2}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">delay</td>
                                            <td class="border p-3">设置mousedown和mouseup之间的延迟时间(ms)</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{delay: 1000}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">modifiers</td>
                                            <td class="border p-3">应用键盘修饰键(Alt, Control, Meta, Shift)</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{modifiers: ["Shift"]}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">force</td>
                                            <td class="border p-3">强制点击，即使元素不可见或被遮挡</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{force: true}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">noWaitAfter</td>
                                            <td class="border p-3">点击后不等待导航或网络请求完成</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{noWaitAfter: true}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">timeout</td>
                                            <td class="border p-3">设置点击操作的超时时间(ms)</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{timeout: 5000}</code></td>
                                        </tr>
                                        <tr>
                                            <td class="border p-3 font-medium">trial</td>
                                            <td class="border p-3">不执行实际点击，只检查元素是否可点击</td>
                                            <td class="border p-3"><code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">{trial: true}</code></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div class="card p-6">
                                <h4 class="font-bold mb-3">点击选项实际应用示例</h4>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h5 class="font-semibold mb-2 text-pink-600">基本点击变体</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto h-48"><code>// 基础点击
await page.click('button');

// 右键点击
await page.click('button', { button: 'right' });

// 双击
await page.dblclick('button');
// 或
await page.click('button', { clickCount: 2 });

// Shift + 点击
await page.click('button', { modifiers: ['Shift'] });

// 点击元素的左上角
await page.click('button', { 
  position: { x: 0, y: 0 } 
});</code></pre>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-semibold mb-2 text-pink-600">高级点击场景</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto h-48"><code>// 强制点击不可见元素
await page.click('button', { force: true });

// 点击时增加延迟
await page.click('button', { delay: 500 });

// 点击后不等待
await page.click('a', { noWaitAfter: true });

// 检查元素是否可点击，但不实际点击
await page.click('button', { trial: true })
  .then(() => console.log('元素可点击'))
  .catch(() => console.log('元素不可点击'));

// 组合多个选项
await page.click('div', {
  button: 'right',
  modifiers: ['Shift'],
  position: { x: 10, y: 15 }
});</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="coordinates" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">坐标计算与事件分发</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">Playwright的鼠标点击实现涉及精确的坐标计算和事件分发机制，这是确保点击行为可靠性的关键因素。</p>
                            
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-center">坐标计算机制</h4>
                                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPHJlY3QgaWQ9ImJyb3dzZXIiIHg9IjUwIiB5PSIyMCIgd2lkdGg9IjMwMCIgaGVpZ2h0PSIyNjAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDxyZWN0IGlkPSJlbGVtZW50IiB4PSIxMDAiIHk9IjEwMCIgd2lkdGg9IjIwMCIgaGVpZ2h0PSIxMDAiIGZpbGw9IiNlM2YyZmQiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIyIi8+DQogIDxjaXJjbGUgaWQ9ImNlbnRlciIgY3g9IjIwMCIgY3k9IjE1MCIgcj0iNSIgZmlsbD0icmVkIi8+DQogIDxjaXJjbGUgaWQ9ImN1c3RvbSIgY3g9IjE1MCIgY3k9IjEyMCIgcj0iNSIgZmlsbD0iZ3JlZW4iLz4NCiAgDQogIDwhLS0gWCBheGlzIC0tPg0KICA8bGluZSB4MT0iMCIgeTE9IjE1MCIgeDI9IjQwMCIgeTI9IjE1MCIgc3Ryb2tlPSJncmF5IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1kYXNoYXJyYXk9IjUsMSIgLz4NCiAgPHRleHQgeD0iMzkwIiB5PSIxNDUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxMiI+WDwvdGV4dD4NCiAgDQogIDwhLS0gWSBheGlzIC0tPg0KICA8bGluZSB4MT0iMjAwIiB5MT0iMCIgeDI9IjIwMCIgeTI9IjMwMCIgc3Ryb2tlPSJncmF5IiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1kYXNoYXJyYXk9IjUsMSIgLz4NCiAgPHRleHQgeD0iMjA1IiB5PSIxMCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIj5ZPC90ZXh0Pg0KDQogIDwhLS0gQXJyb3dzIC0tPg0KICA8bGluZSB4MT0iNjAiIHkxPSI1MCIgeDI9IjEwMCIgeTI9IjEwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1kYXNoYXJyYXk9IjUsMSIgLz4NCiAgPHRleHQgeD0iNjAiIHk9IjQwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPumhtemdouW6lemDqOinkuaoquWdkOagh++8mjAsMDwvdGV4dD4NCiAgDQogIDxsaW5lIHgxPSIyNDAiIHkxPSI2MCIgeDI9IjIwMCIgeTI9IjEwMCIgc3Ryb2tlPSIjMDAwMDAwIiBzdHJva2Utd2lkdGg9IjEiIHN0cm9rZS1kYXNoYXJyYXk9IjUsMSIgLz4NCiAgPHRleHQgeD0iMjQwIiB5PSI1MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIj7lhYPntKDlt6bkuIrooYzkuIrovrnlkozlrr3luqbvvJoxMDAsMTAwPC90ZXh0Pg0KDQogIDxsaW5lIHgxPSIyNjAiIHkxPSIyMjAiIHgyPSIyMDAiIHkyPSIxNTAiIHN0cm9rZT0iIzAwMDAwMCIgc3Ryb2tlLXdpZHRoPSIxIiBzdHJva2UtZGFzaGFycmF5PSI1LDEiIC8+DQogIDx0ZXh0IHg9IjI2MCIgeT0iMjMwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPumbhuWboOeCueWHu++8muWFg+e0oOS4reW/g++8iDEwMCw1MCk8L3RleHQ+DQoNCiAgPGxpbmUgeDE9IjgwIiB5MT0iMjIwIiB4Mj0iMTUwIiB5Mj0iMTIwIiBzdHJva2U9IiMwMDAwMDAiIHN0cm9rZS13aWR0aD0iMSIgc3Ryb2tlLWRhc2hhcnJheT0iNSwxIiAvPg0KICA8dGV4dCB4PSI2MCIgeT0iMjMwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPuiHquWumuS5ieW9qeeItueCueWHu++8iDUwLDIw77yJPC90ZXh0Pg0KPC9zdmc+DQo=" alt="Playwright坐标计算" class="w-full h-auto">
                                    <ul class="mt-4 space-y-2 text-sm">
                                        <li class="flex items-start">
                                            <i class="fas fa-circle text-red-500 mt-1 mr-2 text-xs"></i>
                                            <span>默认点击位置：元素中心点，自动计算</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-circle text-green-500 mt-1 mr-2 text-xs"></i>
                                            <span>自定义点击位置：相对元素左上角的偏移</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-ruler-combined mt-1 mr-2 text-xs"></i>
                                            <span>考虑设备像素比、滚动位置和缩放因子</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3 text-center">事件分发机制</h4>
                                    <div class="overflow-hidden rounded-lg mb-4">
                                        <div class="mermaid">
graph TD
    start[开始点击操作] --> mousedown[触发 mousedown 事件]
    mousedown --> mouseup[触发 mouseup 事件] 
    mouseup --> click[触发 click 事件]
    
    click --> dblclick{是双击?}
    dblclick -->|是| mousedown2[触发第二次 mousedown]
    dblclick -->|否| end[完成]
    
    mousedown2 --> mouseup2[触发第二次 mouseup]
    mouseup2 --> click2[触发第二次 click]
    click2 --> dblclick2[触发 dblclick 事件]
    dblclick2 --> end
    
    classDef default fill:#f9f9f9,stroke:#333,stroke-width:1px;
    classDef event fill:#e1f5fe,stroke:#0288d1,stroke-width:1px;
    classDef condition fill:#fff8e1,stroke:#ffa000,stroke-width:1px;
    classDef end fill:#e8f5e9,stroke:#388e3c,stroke-width:1px;
    
    class mousedown,mouseup,click,mousedown2,mouseup2,click2,dblclick2 event;
    class dblclick condition;
    class end end;
                                        </div>
                                    </div>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-blue-500"></i>
                                            <span>按照浏览器标准顺序分发事件</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-blue-500"></i>
                                            <span>模拟真实用户行为，不仅触发DOM事件</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-blue-500"></i>
                                            <span>支持事件冒泡和事件委托模式</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="card p-6">
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h4 class="font-bold mb-3">两种点击坐标方式</h4>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto h-40"><code>// 1. 相对于元素的点击坐标
// 点击元素左上角偏移10,20像素的位置
await page.locator('button').click({
  position: { x: 10, y: 20 }
});

// 2. 绝对页面坐标点击
// 直接在页面坐标(100, 200)处点击
await page.mouse.click(100, 200);</code></pre>
                                    </div>
                                    
                                    <div>
                                        <h4 class="font-bold mb-3">事件分发与鼠标动作</h4>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto h-40"><code>// 模拟完整的鼠标动作序列
// 1. 移动到元素位置
await page.mouse.move(100, 150);

// 2. 按下鼠标按钮
await page.mouse.down();

// 3. 松开鼠标按钮
await page.mouse.up();

// 或者使用页面级别的分发事件
await page.dispatchEvent('button', 'click', {
  bubbles: true  // 允许事件冒泡
});</code></pre>
                                    </div>
                                </div>
                                
                                <div class="flex items-start mt-4">
                                    <i class="fas fa-lightbulb mr-2 text-yellow-500 text-xl"></i>
                                    <div>
                                        <h5 class="font-semibold">与传统自动化工具的区别</h5>
                                        <p class="mt-1">与传统工具相比，Playwright的点击实现考虑了更多真实世界中的因素：</p>
                                        <ul class="mt-2 pl-4 list-disc space-y-1">
                                            <li>考虑设备像素比(DPR)，在高DPI显示器上正确计算坐标</li>
                                            <li>处理了固定定位(fixed)元素的特殊情况</li>
                                            <li>自动处理元素在点击过程中的状态变化（如样式改变）</li>
                                            <li>优雅处理动态变化的页面元素，提供稳定性</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 高级交互功能与最佳实践 -->
                <section id="advanced-features" class="mb-16">
                    <h2 class="text-3xl font-bold mb-6 pb-2 border-b-2 border-gray-200 dark:border-gray-700">
                        <i class="fas fa-star text-yellow-500 mr-2"></i>高级交互功能与最佳实践
                    </h2>

                    <div id="drag-drop" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">拖拽操作实现</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">拖拽是Web自动化测试中常见但较为复杂的交互操作。Playwright提供了多种方式来实现稳定可靠的拖拽功能，从简单的高级API到细粒度控制的低级API。</p>
                            
                            <div class="overflow-hidden rounded-lg mb-6">
                                <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCiAgPGRlZnM+DQogICAgPGxpbmVhckdyYWRpZW50IGlkPSJiZzEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjAlIj4NCiAgICAgIDxzdG9wIG9mZnNldD0iMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNmOGY5ZmE7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0eWxlPSJzdG9wLWNvbG9yOiNlOWVjZWY7c3RvcC1vcGFjaXR5OjEiIC8+DQogICAgPC9saW5lYXJHcmFkaWVudD4NCiAgPC9kZWZzPg0KICA8cmVjdCB3aWR0aD0iODAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0idXJsKCNiZzEpIiAvPg0KDQogIDxyZWN0IHg9IjEwMCIgeT0iMTAwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjEwMCIgZmlsbD0ibGlnaHRibHVlIiBzdHJva2U9ImJsYWNrIiByeD0iNSIgcnk9IjUiIC8+DQogIDx0ZXh0IHg9IjE3NSIgeT0iMTUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjE2IiBmb250LXdlaWdodD0iYm9sZCI+5rqQ5YWD57SgPC90ZXh0Pg0KDQogIDxyZWN0IHg9IjU1MCIgeT0iMTAwIiB3aWR0aD0iMTUwIiBoZWlnaHQ9IjEwMCIgZmlsbD0ibGlnaHRncmVlbiIgc3Ryb2tlPSJibGFjayIgcng9IjUiIHJ5PSI1IiAvPg0KICA8dGV4dCB4PSI2MjUiIHk9IjE1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1zaXplPSIxNiIgZm9udC13ZWlnaHQ9ImJvbGQiPuebruagh+WFg+e0oDwvdGV4dD4NCg0KICA8IS0tIDIuIE1vdXNlIGRvd24gLS0+DQogIDxjaXJjbGUgY3g9IjE3NSIgY3k9IjE1MCIgcj0iMTAiIGZpbGw9IndoaXRlIiBzdHJva2U9InJlZCIgc3Ryb2tlLXdpZHRoPSIyIiAvPg0KICA8dGV4dCB4PSIxNzUiIHk9IjE1MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0Ij7wn5aRPC90ZXh0Pg0KICA8dGV4dCB4PSIxNzUiIHk9IjE4MCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEyIj4y44CB5oyq5LiL6byg5qCHPC90ZXh0Pg0KDQogIDwhLS0gRHJhZyBhcnJvdyAtLT4NCiAgPGxpbmUgeDE9IjE3NSIgeTE9IjE1MCIgeDI9IjYyNSIgeTI9IjE1MCIgc3Ryb2tlPSJyZWQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWRhc2hhcnJheT0iNSw1IiAvPg0KICA8cG9seWdvbiBwb2ludHM9IjYxNSwxNDAgNjI1LDE1MCA2MTUsMTYwIiBmaWxsPSJyZWQiIC8+DQogIDx0ZXh0IHg9IjQwMCIgeT0iMTMwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPjPjgIHmi5bliqjohJrpm4Y8L3RleHQ+DQoNCiAgPCEtLSA0LiBNb3VzZSB1cCAtLT4NCiAgPGNpcmNsZSBjeD0iNjI1IiBjeT0iMTUwIiByPSIxMCIgZmlsbD0id2hpdGUiIHN0cm9rZT0icmVkIiBzdHJva2Utd2lkdGg9IjIiIC8+DQogIDx0ZXh0IHg9IjYyNSIgeT0iMTUwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiPvCflpE8L3RleHQ+DQogIDx0ZXh0IHg9IjYyNSIgeT0iMTgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTIiPjTjgIHph43nl5vmgKfpvKDmoIc8L3RleHQ+DQoNCiAgPCEtLSBFdmVudCBzZXF1ZW5jZSAtLT4NCiAgPHJlY3QgeD0iMTIwIiB5PSIyNTAiIHdpZHRoPSI1NjAiIGhlaWdodD0iODAiIGZpbGw9IndoaXRlIiBzdHJva2U9ImJsYWNrIiByeD0iNSIgcnk9IjUiIC8+DQogIDx0ZXh0IHg9IjE0MCIgeT0iMjcwIiBmb250LXNpemU9IjE0IiBmb250LXdlaWdodD0iYm9sZCI+5LqL5Lu25Y+R5Ye66YOo5YiG77yaPC90ZXh0Pg0KICA8dGV4dCB4PSIxNDAiIHk9IjI5NSIgZm9udC1zaXplPSIxMiIgZm9udC1mYW1pbHk9IkFyaWFsIj4xLiBtb3VzZWRvd24g4oaSIDIuIGRyYWdzdGFydCDihpIgMy4gZHJhZyDihpIgNC4gZHJhZ292ZXIg4oaSIDUuIGRyb3Ag4oaSIDYuIGRyYWdlbmQg4oaSIDcuIG1vdXNldXA8L3RleHQ+DQo8L3N2Zz4NCg==" alt="Playwright拖拽操作" class="w-full">
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3">方法1: 使用drag_to方法</h4>
                                    <p class="mb-3">Playwright提供了简单直观的<code class="text-xs bg-gray-100 dark:bg-gray-800 px-1 py-0.5 rounded">drag_to</code>方法，它抽象了拖拽操作的底层复杂性：</p>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// JavaScript
await page.locator('#draggable').dragTo(
  page.locator('#droppable')
);

// Python
page.locator("#draggable").drag_to(
  page.locator("#droppable")
)

// 带选项的拖拽
page.locator('#source').drag_to(
  page.locator('#target'),
  {
    force: true,
    source_position: { x: 10, y: 10 },
    target_position: { x: 20, y: 20 }
  }
);</code></pre>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3">方法2: 使用低级鼠标操作</h4>
                                    <p class="mb-3">对于需要更精细控制的场景，可以使用底层鼠标事件来实现拖拽：</p>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 获取源元素和目标元素的位置信息
const source = await page.locator('#source');
const target = await page.locator('#target');
const sourceBox = await source.boundingBox();
const targetBox = await target.boundingBox();

// 计算源元素和目标元素的中心点
const sourceX = sourceBox.x + sourceBox.width / 2;
const sourceY = sourceBox.y + sourceBox.height / 2;
const targetX = targetBox.x + targetBox.width / 2;
const targetY = targetBox.y + targetBox.height / 2;

// 执行拖拽操作
await page.mouse.move(sourceX, sourceY);
await page.mouse.down();
await page.mouse.move(targetX, targetY);
await page.mouse.up();</code></pre>
                                </div>
                            </div>
                            
                            <div class="card p-6">
                                <h4 class="font-bold mb-3">处理特殊拖拽场景</h4>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h5 class="font-semibold mb-2 text-indigo-600">HTML5拖放API</h5>
                                        <p class="mb-2 text-sm">处理基于HTML5拖放API的交互，需确保正确的事件序列：</p>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 确保拖动源处理了dragstart事件
await page.evaluate(() => {
  const source = document.getElementById('source');
  source.addEventListener('dragstart', (e) => {
    e.dataTransfer.setData('text', 'dragged');
  });
});

// 使用Playwright的拖拽方法
await page.locator('#source').dragTo(
  page.locator('#target')
);</code></pre>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-semibold mb-2 text-indigo-600">需要多次移动的拖拽</h5>
                                        <p class="mb-2 text-sm">某些应用需要更精确的鼠标移动路径来触发特定行为：</p>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 执行具有中间移动点的拖拽
await page.mouse.move(sourceX, sourceY);
await page.mouse.down();

// 移动到多个中间点
await page.mouse.move(midX1, midY1);
await page.mouse.move(midX2, midY2);

// 在目标上移动几次以确保触发dragover
await page.mouse.move(targetX, targetY);
await page.mouse.move(targetX+1, targetY+1);

await page.mouse.up();</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="hover" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">悬停与复杂交互</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">悬停是触发菜单、工具提示和其他依赖鼠标位置的UI元素的关键操作，Playwright提供了多种方式进行精确控制。</p>
                            
                            <div class="card p-6 mb-6">
                                <h4 class="font-bold mb-3">悬停操作实现</h4>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                    <div>
                                        <h5 class="font-semibold mb-2 text-indigo-600">使用hover方法</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 基本悬停
await page.hover('button#menu');

// 使用locator悬停
await page.locator('#dropdown-trigger').hover();

// 带选项的悬停
await page.locator('#menu').hover({
  force: true,      // 即使元素不可见也强制悬停
  position: { x: 10, y: 10 },  // 悬停在元素内的特定位置
  timeout: 5000     // 设置超时时间(毫秒)
});</code></pre>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-semibold mb-2 text-indigo-600">使用mouse.move精确控制</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 获取元素位置信息
const element = await page.locator('#menu');
const box = await element.boundingBox();

// 移动到元素中心
await page.mouse.move(
  box.x + box.width / 2, 
  box.y + box.height / 2
);

// 慢动作悬停(模拟更真实的用户行为)
for (let i = 0; i < 10; i++) {
  await page.mouse.move(
    initialX + (targetX - initialX) * i / 10,
    initialY + (targetY - initialY) * i / 10
  );
  await page.waitForTimeout(50);
}</code></pre>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3">文件上传处理</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 方法1: 直接设置input元素的文件
await page.locator('input[type="file"]')
  .setInputFiles('path/to/file.pdf');

// 方法2: 上传多个文件
await page.locator('input[type="file"]')
  .setInputFiles([
    'path/to/file1.pdf',
    'path/to/file2.png'
  ]);

// 方法3: 处理文件选择对话框
const [fileChooser] = await Promise.all([
  page.waitForEvent('filechooser'),
  page.click('#upload-button')  
]);
await fileChooser.setFiles('path/to/file.pdf');</code></pre>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3">文件下载处理</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 创建允许下载的浏览器上下文
const context = await browser.newContext({
  acceptDownloads: true
});
const page = await context.newPage();

// 等待和处理下载
const [download] = await Promise.all([
  page.waitForEvent('download'),
  page.click('#download-button')
]);

// 等待下载完成
const path = await download.path();
// 保存文件到指定位置
await download.saveAs('/path/to/save/file.pdf');

// 获取下载文件名和其他信息
const fileName = download.suggestedFilename();</code></pre>
                                </div>
                            </div>
                            
                            <div class="card p-6">
                                <h4 class="font-bold mb-3">处理模态窗口与对话框</h4>
                                
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <h5 class="font-semibold mb-2 text-indigo-600">处理浏览器原生对话框</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 设置对话框处理程序
page.on('dialog', async dialog => {
  console.log(`对话框消息: ${dialog.message()}`);
  await dialog.accept(); // 或 dialog.dismiss()
});

// 自动确认对话框
await page.on('dialog', dialog => dialog.accept());

// 或在特定操作前设置临时处理
const [dialog] = await Promise.all([
  page.waitForEvent('dialog'),
  page.click('#show-alert')
]);
console.log(dialog.message());
await dialog.accept();</code></pre>
                                    </div>
                                    
                                    <div>
                                        <h5 class="font-semibold mb-2 text-indigo-600">处理Web应用模态窗口</h5>
                                        <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-x-auto"><code>// 打开模态窗口
await page.click('#open-modal');

// 等待模态窗口可见
await page.waitForSelector('#modal-content', {
  state: 'visible'
});

// 与模态窗口交互
const modalText = await page.textContent('#modal-content');
await page.click('#modal-confirm-button');

// 等待模态窗口关闭
await page.waitForSelector('#modal-content', {
  state: 'hidden'
});</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="best-practices" class="mb-8">
                        <h3 class="text-2xl font-semibold mb-4">性能与稳定性优化</h3>
                        
                        <div class="mb-6">
                            <p class="mb-4">为了创建高性能、高可靠性的自动化测试，以下是使用Playwright时推荐的最佳实践。</p>
                            
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                <div class="card p-6">
                                    <div class="flex items-center mb-3">
                                        <i class="fas fa-crosshairs text-xl text-indigo-500 mr-2"></i>
                                        <h4 class="font-bold">选择器策略</h4>
                                    </div>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>使用data-testid等专为测试设计的属性</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>优先使用角色和可访问性属性</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-times text-red-500 mt-1 mr-2"></i>
                                            <span>避免脆弱的选择器(如XPath或复杂CSS)</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="card p-6">
                                    <div class="flex items-center mb-3">
                                        <i class="fas fa-hourglass-half text-xl text-indigo-500 mr-2"></i>
                                        <h4 class="font-bold">等待策略</h4>
                                    </div>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>依赖Playwright的自动等待</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>使用条件等待代替固定时间等待</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-times text-red-500 mt-1 mr-2"></i>
                                            <span>避免使用page.waitForTimeout()</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="card p-6">
                                    <div class="flex items-center mb-3">
                                        <i class="fas fa-tachometer-alt text-xl text-indigo-500 mr-2"></i>
                                        <h4 class="font-bold">性能优化</h4>
                                    </div>
                                    <ul class="space-y-2 text-sm">
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>并行运行独立测试</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>缓存经常使用的定位器</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check text-green-500 mt-1 mr-2"></i>
                                            <span>使用请求拦截模拟API响应</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3">请求拦截与模拟</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 拦截和模拟API请求
await page.route('**/api/users', route => route.fulfill({
  status: 200,
  contentType: 'application/json',
  body: JSON.stringify({
    users: [{ id: 1, name: 'Test User' }]
  })
}));

// 阻止不必要的资源加载
await page.route('**/*.{png,jpg,jpeg}', route => route.abort());

// 修改API请求响应
await page.route('**/api/data', async route => {
  const response = await route.fetch();
  const json = await response.json();
  json.extraField = 'injected value';
  await route.fulfill({
    response,
    body: JSON.stringify(json)
  });
});</code></pre>
                                </div>
                                
                                <div class="card p-6">
                                    <h4 class="font-bold mb-3">测试隔离与状态管理</h4>
                                    <pre class="text-sm font-mono bg-gray-100 dark:bg-gray-800 p-3 rounded overflow-x-auto"><code>// 每个测试使用新的浏览器上下文
// 避免测试间的状态共享
test.beforeEach(async ({ browser }) => {
  context = await browser.newContext();
  page = await context.newPage();
});

test.afterEach(async () => {
  await context.close();
});

// 重用身份验证状态
// 登录一次并存储状态
const authFile = 'auth.json';
await page.goto('https://example.com/login');
await page.fill('#username', 'user');
await page.fill('#password', 'pass');
await page.click('#login');
await context.storageState({ path: authFile });

// 后续测试重用登录状态
const context = await browser.newContext({
  storageState: authFile
});</code></pre>
                                </div>
                            </div>
                        </div>

                        <div class="card p-6">
                            <h4 class="font-bold mb-3 flex items-center">
                                <i class="fas fa-clipboard-check text-green-500 mr-2"></i>
                                最佳实践总结
                            </h4>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <ul class="space-y-2">
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>稳定的选择器</strong> - 使用data-testid、role等有意义的选择器，避免基于视觉样式或DOM位置的脆弱选择器</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>智能等待</strong> - 使用waitForSelector、waitForLoadState等条件等待，避免固定延迟</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>视觉验证</strong> - 使用截图比较，但过滤动态内容，避免不可靠的比较</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>上下文隔离</strong> - 每个测试使用独立上下文，确保测试互不影响</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <ul class="space-y-2">
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>API模拟</strong> - 拦截请求并返回可控数据，减少外部依赖</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>合理分页</strong> - 将测试分解为小型、关注单一功能的测试，而非大型端到端流程</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>并行执行</strong> - 设计测试为并行友好，提高执行效率</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-angle-right mt-1 mr-2 text-indigo-500"></i>
                                            <span><strong>调试增强</strong> - 使用时间戳和截图记录测试状态，简化调试</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- 总结 -->
                <section class="mb-16">
                    <h2 class="text-3xl font-bold mb-6 pb-2 border-b-2 border-gray-200 dark:border-gray-700">
                        <i class="fas fa-flag-checkered text-red-500 mr-2"></i>总结与展望
                    </h2>
                    
                    <div class="mb-8">
                        <p class="mb-4">Playwright通过其现代化的架构设计、强大的选择器系统、智能的自动等待机制和丰富的高级交互功能，彻底改变了Web自动化测试的方式。我们已经深入探讨了Playwright如何实现自动化网页操作与鼠标点击控制，并了解了它与传统自动化工具的关键区别。</p>
                        
                        <div class="card p-6 mb-6">
                            <h3 class="font-bold mb-4">核心优势总结</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <ul class="space-y-2">
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                            <span><strong>统一的跨浏览器支持</strong> - 通过特定协议和统一API，提供一致体验</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                            <span><strong>智能自动等待</strong> - 大幅减少脆弱测试，无需显式等待代码</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                            <span><strong>现代选择器系统</strong> - 基于角色、文本、布局等直观选择器</span>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div>
                                    <ul class="space-y-2">
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                            <span><strong>可靠的事件模拟</strong> - 精确模拟用户交互，包括复杂的拖拽、悬停</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                            <span><strong>强大的调试能力</strong> - 丰富的错误信息和可视化追踪</span>
                                        </li>
                                        <li class="flex items-start">
                                            <i class="fas fa-check-circle mt-1 mr-2 text-green-500"></i>
                                            <span><strong>现代前端支持</strong> - Shadow DOM穿透和现代框架支持</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 rounded-lg p-6 text-white">
                            <h3 class="font-bold mb-3">未来发展趋势</h3>
                            <p class="mb-2">随着Web应用变得更加复杂，Playwright等现代自动化工具将继续演进，可能的发展方向包括：</p>
                            <ul class="space-y-1 pl-4 list-disc">
                                <li>更深入的AI辅助测试，自动生成和优化测试用例</li>
                                <li>更完善的性能测试集成，包括更详细的网络和渲染指标分析</li>
                                <li>无代码/低代码测试创建界面，降低自动化测试的门槛</li>
                                <li>更强大的组件测试能力，缩小集成测试与单元测试之间的差距</li>
                                <li>更全面的可观测性集成，提供端到端的测试和监控解决方案</li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="py-12 bg-gray-800 text-white">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <h3 class="text-xl font-bold mb-4">关于本文</h3>
                    <p class="mb-4">本文深入剖析了Playwright的底层架构、DOM操作原理、鼠标点击模拟机制以及高级交互功能，旨在帮助开发者和测试工程师更好地理解和使用这一现代化自动化测试工具。</p>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">相关资源</h3>
                    <ul class="space-y-2">
                        <li><a href="https://playwright.dev" class="hover:text-indigo-300 transition-colors">Playwright官方文档</a></li>
                        <li><a href="https://github.com/microsoft/playwright" class="hover:text-indigo-300 transition-colors">Playwright GitHub仓库</a></li>
                        <li><a href="https://devblogs.microsoft.com/playwright/" class="hover:text-indigo-300 transition-colors">Playwright开发博客</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-xl font-bold mb-4">反馈与建议</h3>
                    <p class="mb-2">如果您有任何问题或建议，请随时联系我们。</p>
                    <div class="flex space-x-4 mt-4">
                        <a href="#" class="text-2xl hover:text-indigo-300 transition-colors"><i class="fab fa-github"></i></a>
                        <a href="#" class="text-2xl hover:text-indigo-300 transition-colors"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-2xl hover:text-indigo-300 transition-colors"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
            </div>
            <div class="mt-8 pt-8 border-t border-gray-700 text-center">
                <p class="text-gray-400">© 2025 Playwright自动化指南 | 报告生成时间: 2025年3月29日</p>
            </div>
        </div>
    </footer>

    <script>
        // 初始化mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: document.body.classList.contains('dark') ? 'dark' : 'default' 
        });

        // 深色模式切换
        const themeToggle = document.getElementById('themeToggle');
        
        // 检查系统主题偏好和用户设置
        function checkTheme() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme) {
                document.body.classList.toggle('dark', savedTheme === 'dark');
                themeToggle.checked = savedTheme === 'dark';
            } else {
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                document.body.classList.toggle('dark', prefersDark);
                themeToggle.checked = prefersDark;
            }
            
            // 重新初始化mermaid
            mermaid.initialize({ 
                startOnLoad: true,
                theme: document.body.classList.contains('dark') ? 'dark' : 'default' 
            });
        }
        
        // 初始检查主题
        checkTheme();
        
        // 主题切换事件
        themeToggle.addEventListener('change', () => {
            document.body.classList.toggle('dark', themeToggle.checked);
            localStorage.setItem('theme', themeToggle.checked ? 'dark' : 'light');
            
            // 重新初始化mermaid
            mermaid.init(undefined, document.querySelectorAll('.mermaid'));
        });
        
        // 选项卡功能
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // 移除所有选项卡的活动状态
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                // 激活当前选项卡
                tab.classList.add('active');
                document.getElementById(`${tabId}-content`).classList.add('active');
            });
        });

        // 滚动进度条
        window.onscroll = function() {
            let winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            let height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            let scrolled = (winScroll / height) * 100;
            document.getElementById("progressBar").style.width = scrolled + "%";
        };
        
        // 平滑滚动到锚点
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>